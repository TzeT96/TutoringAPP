(()=>{var e={};e.id=136,e.ids=[136,2888,660],e.modules={1323:(e,t)=>{"use strict";Object.defineProperty(t,"l",{enumerable:!0,get:function(){return function e(t,s){return s in t?t[s]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,s)):"function"==typeof t&&"default"===s?t:void 0}}})},7639:(e,t,s)=>{"use strict";s.r(t),s.d(t,{config:()=>y,default:()=>g,getServerSideProps:()=>f,getStaticPaths:()=>b,getStaticProps:()=>h,reportWebVitals:()=>j,routeModule:()=>_,unstable_getServerProps:()=>w,unstable_getServerSideProps:()=>S,unstable_getStaticParams:()=>N,unstable_getStaticPaths:()=>P,unstable_getStaticProps:()=>v});var r={};s.r(r),s.d(r,{default:()=>p,getServerSideProps:()=>u});var i=s(7093),n=s(5244),a=s(1323),l=s(1777),o=s.n(l),d=s(9551),c=s(997);let m=require("@prisma/client"),x=globalThis.prisma||new m.PrismaClient,u=async({params:e})=>{let t=e?.assignmentId,s=e?.studentId;try{let e;let r=(await x.submissionDetail.findMany({where:{assignment_id:parseInt(t)},include:{assignment:!0}})).find(e=>{try{return("string"==typeof e.submission_detection_result?JSON.parse(e.submission_detection_result):e.submission_detection_result).student_email===s}catch(e){return console.error("Error parsing detection result:",e),!1}});if(!r)return{notFound:!0};try{e="string"==typeof r.submission_detection_result?JSON.parse(r.submission_detection_result):r.submission_detection_result}catch(e){return console.error("Error parsing detection result:",e),{notFound:!0}}return{props:{reportData:{studentName:e.student_name,studentEmail:e.student_email,assignmentName:r.assignment.assignment_name,courseCode:r.assignment.course_code,aiProbability:e.ai_probability,lowestPerplexitySentences:e.top_5_lowest_perplexity_sentences}}}}catch(e){return console.error("Error fetching report data:",e),{notFound:!0}}},p=({reportData:e})=>c.jsx("div",{className:"min-h-screen bg-gray-100 py-12 px-4 sm:px-6 lg:px-8",children:c.jsx("div",{className:"max-w-4xl mx-auto",children:(0,c.jsxs)("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[c.jsx("div",{className:"px-4 py-5 sm:px-6 bg-gradient-to-r from-indigo-500 to-purple-600",children:c.jsx("h1",{className:"text-xl font-semibold text-white",children:"AI Detection Report"})}),c.jsx("div",{className:"px-4 py-5 sm:p-6",children:(0,c.jsxs)("div",{className:"grid grid-cols-1 gap-6",children:[c.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:(0,c.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,c.jsxs)("div",{children:[c.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Student"}),c.jsx("p",{className:"mt-1 text-sm text-gray-900",children:e.studentName}),c.jsx("p",{className:"text-sm text-gray-500",children:e.studentEmail})]}),(0,c.jsxs)("div",{children:[c.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Assignment"}),c.jsx("p",{className:"mt-1 text-sm text-gray-900",children:e.assignmentName}),c.jsx("p",{className:"text-sm text-gray-500",children:e.courseCode})]})]})}),(0,c.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[c.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"AI Probability Score"}),(0,c.jsxs)("div",{className:"mt-2 flex items-center",children:[c.jsx("div",{className:"flex-1",children:c.jsx("div",{className:"bg-gray-200 rounded-full h-4 overflow-hidden",children:c.jsx("div",{className:`h-4 rounded-full ${e.aiProbability>=.8?"bg-red-500":e.aiProbability>=.6?"bg-yellow-500":"bg-green-500"}`,style:{width:`${100*e.aiProbability}%`}})})}),(0,c.jsxs)("span",{className:"ml-3 text-sm font-medium text-gray-900",children:[(100*e.aiProbability).toFixed(1),"%"]})]})]}),(0,c.jsxs)("div",{children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Most AI-Like Sentences"}),c.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Lower perplexity scores indicate higher likelihood of AI-generated content."}),c.jsx("div",{className:"space-y-4",children:e.lowestPerplexitySentences.map((e,t)=>c.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:(0,c.jsxs)("div",{className:"flex items-start",children:[(0,c.jsxs)("span",{className:"flex-shrink-0 bg-indigo-100 text-indigo-700 px-2 py-1 rounded-md text-sm font-medium",children:["#",t+1]}),(0,c.jsxs)("div",{className:"ml-4",children:[c.jsx("p",{className:"text-sm text-gray-900",children:e.sentence}),(0,c.jsxs)("p",{className:"mt-1 text-sm text-gray-500",children:["Perplexity Score: ",e.perplexity.toFixed(2)]})]})]})},t))})]}),c.jsx("div",{className:"flex justify-end mt-6",children:(0,c.jsxs)("button",{onClick:()=>{let t=`AI Detection Report
    
Student: ${e.studentName} (${e.studentEmail})
Assignment: ${e.assignmentName}
Course: ${e.courseCode}
AI Probability: ${(100*e.aiProbability).toFixed(1)}%

Most AI-Like Sentences (Lowest Perplexity Scores):
${e.lowestPerplexitySentences.map((e,t)=>`
${t+1}. "${e.sentence}"
   Perplexity Score: ${e.perplexity.toFixed(2)} (lower score indicates higher likelihood of AI generation)`).join("\n")}`,s=new Blob([t],{type:"text/plain"}),r=window.URL.createObjectURL(s),i=document.createElement("a");i.href=r,i.download=`AI_Detection_Report_${e.studentName.replace(/\s+/g,"_")}.txt`,document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(r)},className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[c.jsx("svg",{className:"-ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd"})}),"Download Report"]})})]})})]})})}),g=(0,a.l)(r,"default"),h=(0,a.l)(r,"getStaticProps"),b=(0,a.l)(r,"getStaticPaths"),f=(0,a.l)(r,"getServerSideProps"),y=(0,a.l)(r,"config"),j=(0,a.l)(r,"reportWebVitals"),v=(0,a.l)(r,"unstable_getStaticProps"),P=(0,a.l)(r,"unstable_getStaticPaths"),N=(0,a.l)(r,"unstable_getStaticParams"),w=(0,a.l)(r,"unstable_getServerProps"),S=(0,a.l)(r,"unstable_getServerSideProps"),_=new i.PagesRouteModule({definition:{kind:n.x.PAGES,page:"/report/[assignmentId]/[studentId]",pathname:"/report/[assignmentId]/[studentId]",bundlePath:"",filename:""},components:{App:d.default,Document:o()},userland:r})},9551:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var r=s(997),i=s(1649),n=s(1664),a=s.n(n),l=s(1163);function o({children:e}){let{data:t}=(0,i.useSession)(),s=(0,l.useRouter)(),n=s.pathname.startsWith("/student"),o="/"===s.pathname,d=async()=>{let e=window.location.origin;await (0,i.signOut)({redirect:!0,callbackUrl:`${e}/auth/signin`})};return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("header",{className:"bg-white shadow-sm",children:(0,r.jsxs)("nav",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between",children:[n?(0,r.jsxs)("div",{className:"flex items-center space-x-2 text-xl font-semibold text-gray-900",children:[r.jsx("img",{src:"/images/logo.svg",alt:"Tutoring App Logo",width:40,height:40,className:"h-10 w-10"}),r.jsx("span",{children:"Tutoring App"})]}):(0,r.jsxs)(a(),{href:"/",className:"flex items-center space-x-2 text-xl font-semibold text-gray-900 hover:text-gray-700",children:[r.jsx("img",{src:"/images/logo.svg",alt:"Tutoring App Logo",width:40,height:40,className:"h-10 w-10"}),r.jsx("span",{children:"Tutoring App"})]}),t&&!n&&!o&&(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[r.jsx("span",{className:"text-sm text-gray-600",children:t.user?.email}),r.jsx("button",{onClick:d,className:"px-4 py-2 text-sm text-red-600 hover:text-red-800",children:"Sign Out"})]})]})}),r.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e})]})}function d({Component:e,pageProps:{session:t,...s}}){return r.jsx(i.SessionProvider,{session:t,children:r.jsx(o,{children:r.jsx(e,{...s})})})}s(108)},108:()=>{},5244:(e,t)=>{"use strict";var s;Object.defineProperty(t,"x",{enumerable:!0,get:function(){return s}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(s||(s={}))},1649:e=>{"use strict";e.exports=require("next-auth/react")},2785:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{"use strict";e.exports=require("react")},6405:e=>{"use strict";e.exports=require("react-dom")},997:e=>{"use strict";e.exports=require("react/jsx-runtime")},7147:e=>{"use strict";e.exports=require("fs")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},9796:e=>{"use strict";e.exports=require("zlib")}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[6255,3424,1777],()=>s(7639));module.exports=r})();